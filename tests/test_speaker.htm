<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<!-- <meta http-equiv="X-UA-Compatible" content="IE=7" /> -->
		<!-- <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7; IE=EmulateIE9"> -->
		<meta http-equiv="X-UA-Compatible" content="chrome=1" />

		<script src="../cordova.js"></script>          <!-- phantom library, needed for Cordova api calls, added during build -->
		<script src="../xdk/init-dev.js"></script>     <!-- normalizes device and document ready events, see README for details -->

		<title>CrossBrowdy - Speaker test</title>

		<style>
			.mystyle
			{
				position: absolute;
				background-color: #0000aa;
				border: 0px;
				left:0px;
				top:0px;
			}
			#info
			{
				position:absolute;
				top:2px;
				font-size:18px;
				background-color:#dddddd;
				padding:10px;
				border:1px dotted #222222;			
			}
			.dataInfo
			{
				display:inline;
				color:#005500;
				
			}
			button
			{
				font-size:14px;
				line-height:14px;
				height:32px;
				padding-left:10px;
				padding-right:10px;

				text-align:center;
				
				width:480px;

				border:1px dashed #00ff00;
				color:#ffbb00;
     			background-color:#aa0000;
			}
		</style>

		<!--[if lt IE 9]> 
			<script type="text/javascript" src="NO../CrossBrowdy/screen/canvas/FlashCanvas/bin/flashcanvas.js"></script>
		<![endif]-->
		<script type="text/javascript" src="../CrossBrowdy/CrossBrowdy.js"></script> <!-- CrossBrowdy by Joan Alba Maldonado (workindalian@gmail.com) -->
		<script type="text/javascript">
		<!--
			//Starts CrossBrowdy:
			CB_init(main, "../CrossBrowdy/"); //It will call main function when ready.

			var backgroundSoundInterval; //Stores the interval that plays the background sound.
			
			
			//This function called main will be called when CrossBrowdy is ready:
			function main()
			{
				//Sets the viewport tag:
				CB_Screen.setViewport(900, null, true, null, null, null, null);
			
				//Show credits:
				CB_Elements.id("credits").innerHTML = CB_credits();

				//Shows start button:
				CB_Elements.id('start').style.visibility = "visible";

				//Show audio API:
				showAudioAPI();
				
				return;
			}

			//Starts test:
			function start()
			{
				//Hides start button:
				CB_Elements.id('start').style.visibility = "hidden";
				
				//Shows controls:
				CB_Elements.id('controls').style.visibility = "visible";

				//Set events:
				setEvents();

				playSoundBase("music");
				
				return;
			}
			
			
			//Function that shows the audio API used:
			function showAudioAPI()
			{
				var APIs = { "WAAPI" : "Web Audio API", "ADAPI" : "Audio Data API", "SM2" : "SoundManager 2", "AAPI" : "Audio API" };
				var APIused = (CB_Speaker.audioAPI !== null) ? CB_Speaker.audioAPI + " (" + APIs[CB_Speaker.audioAPI] + ")" : "none";
				document.getElementById("audioAPI").innerHTML = APIused;
				return;
			}
			
			//Cancel all events:
			function cancelEvents()
			{
				//Cancel all events:

				//Clear all the intervals:
//				clearInterval(backgroundSoundInterval);
				
				return;
			}


			//Set all events:
			function setEvents()
			{
				//Cancel previous events first (if any):
				cancelEvents();

				//Set the events:
//				backgroundSoundInterval = setInterval(function() { playSoundBase("welcome"); }, 1000);
				
				return;
			}

			
			//Plays a sound calculating extension:
			function playSoundBase(sound)
			{
				CB_Speaker.playFileBase(CB_scriptPath + "../tests/audio/" + sound);
			}

			//Plays a sound:
			function playSound(sound)
			{
				CB_Speaker.playFile(CB_scriptPath + "../tests/audio/" + sound);
			}
			
		// -->
		</script>
		
	</head>
	<body bgcolor="#ffaadd">
		<div id="info">
			<div style="font-size:30px; color:red; text-align:center;">CrossBrowdy - Speaker test</div>
			<br />
			<center><a href="index.htm">Go back</a></center>
			<br />

			Audio API used: <div id="audioAPI" style="display:inline; font-size:20px; color:#005500; text-align:center;"></div>
			
			<br />
			
			<div id="start" style="visibility:hidden;">
				<button onClick="start();">Start test</button>
			</div>
			
			<div id="controls" style="visibility:hidden;">
				<div style="text-align:center;"><button onClick="cancelEvents(); alert('All events stopped');">Cancel events</button></div>
				<br />
				<div style="text-align:center;"><button onClick="setEvents(); alert('All events started');">Set events</button></div>

				<br />
				<div style="text-align:center;"><button onClick="playSoundBase('horse');">Play sound #1 (auto extension)</button></div>
				<br />
				<div style="text-align:center;"><button onClick="playSoundBase('coins');">Play sound #2 (auto extension)</button></div>

				<br />
			
				<div style="text-align:center;">
					<button onClick="playSound('horse.mp3');" style="width:15%;">MP3 #1</button>
					<button onClick="playSound('horse.ogg');" style="width:15%;">OGG #1</button>
					<button onClick="playSound('horse.wav');" style="width:15%;">WAV #1</button>
					<button onClick="playSound('horse.m4a');" style="width:15%;">M4A #1</button>
					<button onClick="playSound('horse.mp4');" style="width:15%;">MP4 #1</button>
					<button onClick="playSound('horse.opus');" style="width:15%;">OPUS #1</button>
				</div>

				<br />
			
				<div style="text-align:center;">
					<button onClick="playSound('coins.mp3');" style="width:15%;">MP3 #2</button>
					<button onClick="playSound('coins.ogg');" style="width:15%;">OGG #2</button>
					<button onClick="playSound('coins.wav');" style="width:15%;">WAV #2</button>
					<button onClick="playSound('coins.m4a');" style="width:15%;">M4A #2</button>
					<button onClick="playSound('coins.mp4');" style="width:15%;">MP4 #2</button>
					<button onClick="playSound('coins.opus');" style="width:15%;">OPUS #2</button>
				</div>
			</div>
			
			<br />
			<br />
			<div id="credits" style="font-size:12px; color:#aa0000; text-align:left;">CrossBrowdy by Joan Alba Maldonado</div>
			<div id="CB_console" style="display:none; visibility:hidden; font-size:12px; text-align:left; width:100%; height:200px; overflow:scroll;"><span style="font-weight:bold;">Console:</span><br /></div>
		</div>
	</body>
</html>
